import{u as v,a as w}from"./counter-5cebc8db.js";import{d as p,r as k}from"./relativeTime-73612df9.js";import{_ as C,o,c as e,a as t,F as g,r as f,t as i,b as _,f as b,p as U,e as x}from"./index-1e837380.js";p.extend(k);const N={name:"searchUserComp",data(){return{usersData:[],posts:[],followers:[],following:[],showingfollowers:!1,showingfollowing:!1,new_User:"",showingComments:""}},setup(){return{store:v()}},methods:{showfollowers(){this.showingfollowers=!this.showingfollowers},home(){this.$router.push({name:"Home Page"})},follow(n){const l={"Content-Type":"application/json",Authorization:"Bearer "+this.store.access_token};w.post(`http://localhost:5000/bloglite/relation/${n}`,{},{headers:l}).then(r=>{console.log(r),r.data.id===0&&this.followers.push({username:this.store.userName}),alert(r.data.msg)}).catch(r=>{console.log(r)})},unfollow(n){const l={"Content-Type":"application/json",Authorization:"Bearer "+this.store.access_token};w.delete(`http://localhost:5000/bloglite/relation/${n}`,{headers:l}).then(r=>{if(console.log(r),r.data.id===0)for(let m=0;m<this.followers.length;m++)this.followers[m].username===this.store.userName&&this.followers.splice(m,1);alert(r.data.msg)}).catch(r=>{console.log(r)})},showUser(n){this.store.show_User(n)},showfollowings(){this.showingfollowing=!this.showingfollowing},showComments(n){this.showingComments===n?this.showingComments="":this.showingComments=n}},computed:{showCom(){return this.showingComments!==""}},beforeMount(){this.store.isLoggedIn||this.$router.push({name:"login"})},mounted(){const n={"Content-Type":"application/json",Authorization:"Bearer "+this.store.access_token};w.get(`http://localhost:5000/bloglite/profile/${this.store.searchUsername}`,{headers:n}).then(l=>{this.usersData=l.data.profile_feed.userData,this.posts=l.data.profile_feed.blogs,this.followers=l.data.profile_feed.followers,this.following=l.data.profile_feed.following,this.posts.forEach(r=>{r.blogCreation=p(r.blogCreation).fromNow()}),console.log(this.followers)}).catch(l=>{console.log(l)})}},a=n=>(U("data-v-496f74b2"),n=n(),x(),n),j={class:"container-fluid"},B={class:"row"},I={class:"col-md-3 bg-light sidebar"},S={class:"sidebar-content",ref:"leftSidebar"},T={class:"card border-light mb-3",style:{"max-width":"20rem"}},z={class:"card-header"},D=["onClick"],F=["onClick"],V={class:"card-body"},A={class:"card-title"},L={class:"card-footer"},$={key:0},E=a(()=>t("small",null," No followers ",-1)),P=[E],R={key:1},G=["onClick"],H=a(()=>t("br",null,null,-1)),M=a(()=>t("br",null,null,-1)),q={key:0},J=a(()=>t("small",null," No followings ",-1)),K=[J],O={key:1},Q=["onClick"],W=a(()=>t("br",null,null,-1)),X={class:"col-md-7 bg-light sidebar"},Y={class:"container d-flex justify-content-between align-items-center"},Z={class:"row"},tt={class:"col-md-11"},st={class:"card-body"},ot={style:{"background-color":"#e6e889"}},et={key:0,class:"card-title",style:{"text-decoration":"none","font-size":"larger"}},lt={style:{"font-size":"smaller"}},nt={class:"card-title border-bottom border-top mt-1"},it=["src"],rt={class:"card-text",style:{"text-align":"justify"}},at={class:"d-flex justify-content-between align-items-center"},ct={class:"btn-group"},dt={type:"button",class:"btn btn-sm btn-outline-secondary",disabled:""},ht=a(()=>t("i",{class:"bi bi-hand-thumbs-up"},null,-1)),ut={type:"button",class:"btn btn-sm btn-outline-secondary",disabled:""},_t=a(()=>t("i",{class:"bi bi-hand-thumbs-down"},null,-1)),bt=["onClick"],mt=a(()=>t("i",{class:"bi bi-chat-dots"},null,-1)),gt={key:0,class:"card-footer"},ft={class:"border-top border-bottom"},wt={class:"text-muted border-bottom"},pt={class:"col-md-2 bg-light sidebar"},yt=a(()=>t("br",null,null,-1)),vt={class:"d-flex position-relative"},kt=a(()=>t("br",null,null,-1));function Ct(n,l,r,m,h,d){return o(),e("div",j,[t("div",B,[t("div",I,[t("div",S,[t("div",T,[(o(!0),e(g,null,f(h.usersData,(s,c)=>(o(),e("div",{key:c},[t("div",z,[t("span",null,[t("h5",null,[t("b",null,"@"+i(s.userUsername),1)])]),t("span",null,[t("button",{type:"button",class:"btn btn-success btn-sm d-inline-block position-absolute top-0",style:{"margin-left":"10.1rem","margin-top":"8px"},onClick:u=>d.follow(s.userUsername)}," Follow ",8,D)]),t("span",null,[t("button",{type:"button",class:"btn btn-secondary btn-sm d-inline-block position-absolute top-0 end-0",style:{"margin-left":"10.9rem","margin-top":"8px"},onClick:u=>d.unfollow(s.userUsername)}," Unfollow ",8,F)])]),t("div",V,[t("h5",A,[b("Name: "),t("b",null,i(s.userName),1)]),t("small",null,[b(" Number of blogs: "),t("b",null,i(s.userNoBlog),1)])])]))),128)),t("div",L,[t("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:l[0]||(l[0]=s=>d.showfollowers())}," #Followers: "+i(this.followers.length),1),this.followers.length===0?(o(),e("div",$,P)):_("",!0),h.showingfollowers&&this.followers.length>0?(o(),e("div",R,[t("ul",null,[(o(!0),e(g,null,f(h.followers,(s,c)=>(o(),e("li",{key:c},[t("a",{onClick:u=>d.showUser(s.username)}," @"+i(s.username),9,G)]))),128))])])):_("",!0),H,M,t("div",null,[t("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:l[1]||(l[1]=s=>d.showfollowings())}," #Followings: "+i(this.following.length),1),this.following.length===0?(o(),e("div",q,K)):_("",!0),h.showingfollowing&&this.following.length>0?(o(),e("div",O,[t("ul",null,[(o(!0),e(g,null,f(h.following,(s,c)=>(o(),e("li",{key:c},[t("a",{onClick:u=>d.showUser(s.username)}," @"+i(s.username),9,Q)]))),128))])])):_("",!0)])])]),W],512)]),t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[(o(!0),e(g,null,f(h.posts,(s,c)=>(o(),e("div",{key:c,class:"card mb-3 border-dark"},[t("div",st,[t("div",ot,[t("span",null,[s.blogArchive===!1?(o(),e("a",et,[b("@"),t("b",null,i(this.store.searchUsername),1),b("   ")])):_("",!0)]),t("span",null,[t("small",lt,i(s.blogCreation),1)])]),t("h5",nt,i(s.blogTitle),1),s.blogImageURL?(o(),e("img",{key:0,src:`http://127.0.0.1:5000/image/${s.blogImageURL}`,class:"card-img-top",alt:"Post image"},null,8,it)):_("",!0),t("p",rt,i(s.blogCaption),1),t("div",at,[t("div",ct,[t("button",dt,[ht,b(" "+i(s.likes),1)]),t("button",ut,[_t,b(" "+i(s.dislikes),1)]),t("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:u=>d.showComments(c)},[mt,b(" "+i(s.comments.length),1)],8,bt)])])]),h.showingComments===c?(o(),e("div",gt,[(o(!0),e(g,null,f(s.comments,(u,y)=>(o(),e("div",{key:y,class:"mb-2"},[t("div",ft,[t("span",wt,[t("b",null,"@"+i(u.c_userUsername),1)]),t("p",null,"  "+i(u.comment),1)])]))),128))])):_("",!0)]))),128))])])])]),t("div",pt,[yt,t("div",vt,[t("button",{type:"button",class:"btn btn-dark btn-sm position-absolute end-0 top-1",style:{"margin-top":"-2%","margin-right":"1%"},onClick:l[2]||(l[2]=s=>d.home())},"Go to home page")]),kt])])])}const jt=C(N,[["render",Ct],["__scopeId","data-v-496f74b2"]]);export{jt as default};
