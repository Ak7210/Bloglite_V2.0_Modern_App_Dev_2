import{v as c}from"./validate-7539bfb6.js";import{_ as h,o as i,c as m,a as s,w as l,v as d,t as u,b as p,d as g,p as w,e as v}from"./index-1e837380.js";const b={name:"RegisterView",data(){return{name:"",username:"",password:"",confirm_password:"",name_errorMsg:"",username_errorMsg:"",password_errorMsg:""}},methods:{ValidateName(){const t={name:{presence:!0,length:{minimum:4,message:"must be at least 4 characters"},format:{pattern:"[a-z A-Z]+",message:"can only contain a-z and A-Z"}}},e=c({name:this.name},t);return e?(this.name_errorMsg=e.name[0],!1):(this.name_errorMsg="",!0)},validateUser(){const t={username:{presence:!0,length:{minimum:4,message:"must be at least 4 characters"},format:{pattern:"[a-z0-9]+",message:"can only contain a-z and 0-9"}}},e=c({username:this.username},t);return e?(this.username_errorMsg=e.username[0],!1):(this.username_errorMsg="",!0)},validatePassword(){const t={password:{presence:!0,length:{minimum:8,message:"must be at least 8 characters"},format:{pattern:`(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*()_+\\-=\\[\\]{};':"\\\\|,.<>\\/?]).{8,}`,message:" must contain at least one lowercase letter, one uppercase letter, one numeric digit, and one special character"}},confirm_password:{presence:!0,equality:{attribute:"password",message:"password must match"}}},e=c({password:this.password,confirm_password:this.confirm_password},t);if(e){for(const o in e)this.password_errorMsg=e[o][0];return!1}else return this.password_errorMsg="",!0},async create(t){if(t.preventDefault(),this.validateUser()&&this.validatePassword()&&this.ValidateName()){const e=await fetch("http://localhost:5000/bloglite/registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.name.replace(/\b\w/g,_=>_.toUpperCase()),username:this.username,password:this.password})}),o=await e.json();e.status===201?(this.$router.push("/"),alert(o.msg)):(this.username_errorMsg=o.message,alert(o.msg))}}}},n=t=>(w("data-v-f913293a"),t=t(),v(),t),y={class:"container mt-5"},M={class:"row justify-content-center"},V={class:"col-md-4"},z={class:"card"},U=n(()=>s("div",{class:"card-header"},[s("h4",{class:"mb-0"},"Sign up")],-1)),k={class:"card-body"},x={class:"form",role:"form",autocomplete:"off"},S={class:"mb-3 mt-2"},C=n(()=>s("label",{for:"name",class:"form-label"},"Full name",-1)),q={key:0,class:"alert alert-danger m-1"},A={class:"mb-3 mt-2"},N=n(()=>s("label",{for:"name",class:"form-label"},"Username",-1)),P={key:1,class:"alert alert-danger m-1"},I={class:"mb-3"},j=n(()=>s("label",{for:"password",class:"form-label"},"Password",-1)),B={class:"mb-3 mt-2"},D=n(()=>s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),R={key:2,class:"alert alert-danger m-1"},T={class:"mb-3 mt-2"},Z=n(()=>s("a",{href:"/"},"Already have an account? Log in",-1));function O(t,e,o,_,r,f){return i(),m("div",y,[s("div",M,[s("div",V,[s("div",z,[U,s("div",k,[s("form",x,[s("div",S,[C,l(s("input",{type:"text",class:"form-control",name:"name",id:"name","onUpdate:modelValue":e[0]||(e[0]=a=>r.name=a),required:""},null,512),[[d,r.name,void 0,{trim:!0,lazy:!0}]])]),r.name_errorMsg?(i(),m("div",q,u(r.name_errorMsg),1)):p("",!0),s("div",A,[N,l(s("input",{type:"text",class:"form-control",name:"username",id:"username","onUpdate:modelValue":e[1]||(e[1]=a=>r.username=a),required:""},null,512),[[d,r.username,void 0,{trim:!0,lazy:!0}]])]),r.username_errorMsg?(i(),m("div",P,u(r.username_errorMsg),1)):p("",!0),s("div",I,[j,l(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),required:""},null,512),[[d,r.password,void 0,{trim:!0,lazy:!0}]])]),s("div",B,[D,l(s("input",{type:"password",class:"form-control",id:"confirm_password","onUpdate:modelValue":e[3]||(e[3]=a=>r.confirm_password=a),required:""},null,512),[[d,r.confirm_password,void 0,{trim:!0,lazy:!0}]])]),r.password_errorMsg?(i(),m("div",R,u(r.password_errorMsg),1)):p("",!0),s("div",T,[Z,s("button",{type:"submit",class:"btn btn-primary float-end mb-2",onClick:e[4]||(e[4]=g((...a)=>f.create&&f.create(...a),["prevent"]))},"Create Account")])])])])])])])}const J=h(b,[["render",O],["__scopeId","data-v-f913293a"]]);export{J as default};
