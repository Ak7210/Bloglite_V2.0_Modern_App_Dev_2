import{u as _}from"./counter-5cebc8db.js";import{_ as p,o as c,c as d,a as s,w as l,v as m,b as u,p as h,e as f}from"./index-1e837380.js";const g={name:"LoginView",setup(){return{store:_()}},data(){return{username:"",password:"",isLoggedin:this.store.isLoggedin,login_error:""}},methods:{async login(o){o.preventDefault();const e=await fetch("http://localhost:5000/bloglite/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}),t=await e.json();console.log(t),e.ok?e.status===200&&(this.store.setToken(t.access_token),document.cookie="access_token="+t.access_token,this.$router.push("/home"),alert(t.msg)):(this.login_error=t.message,alert(t.msg))}}},r=o=>(h("data-v-9a75abbe"),o=o(),f(),o),b={class:"container"},w={class:"row justify-content-center"},v={class:"col-md-4"},y={class:"card"},k=r(()=>s("div",{class:"card-header"},[s("h4",{class:"mb-0"},"Log in")],-1)),S={class:"card-body"},V={class:"form",role:"form",autocomplete:"off"},x={class:"mb-3 mt-2"},L=r(()=>s("label",{for:"name",class:"form-label"},"Username",-1)),I={class:"mb-3"},T=r(()=>s("label",{for:"password",class:"form-label"},"Password",-1)),j={class:"mb-3 mt-2"},B=r(()=>s("a",{href:"/register"},"Don't have an account? Sign up",-1));function C(o,e,t,D,a,i){return c(),d("div",b,[s("div",w,[s("div",v,[s("div",y,[k,s("div",S,[s("form",V,[s("div",x,[L,l(s("input",{type:"text",class:"form-control",name:"username",id:"username","onUpdate:modelValue":e[0]||(e[0]=n=>a.username=n),required:""},null,512),[[m,a.username]])]),s("div",I,[T,l(s("input",{type:"password",class:"form-control",id:"password","onUpdate:modelValue":e[1]||(e[1]=n=>a.password=n),required:""},null,512),[[m,a.password]])]),s("div",j,[B,a.username!=""&&a.password!=""?(c(),d("button",{key:0,type:"submit",class:"btn btn-primary float-end mb-2",onClick:e[2]||(e[2]=(...n)=>i.login&&i.login(...n))}," log in ")):u("",!0)])])])])])])])}const q=p(g,[["render",C],["__scopeId","data-v-9a75abbe"]]);export{q as default};
